%h1.ui.header
  = t('.title', name: @expert.full_name)
  .sub.header= t('.subtitle', institution: @expert.institution)

.ui.icon.info.message
  %i.info.icon
  .content
    .header
    = t('.description')

= form_with model: @expert, class: 'ui form' do |f|
  - @is_by_theme.each do |theme, institutions_subjects|
    %h3.ui.header= theme.label
    - institutions_subjects.each do |institution_subject|
      - expert_subject = ExpertSubject.where(expert: @expert, institution_subject: institution_subject).first_or_initialize
      .ui.field.institution-subject
        .ui.checkbox
          = f.fields_for :experts_subjects, expert_subject do |i|
            = i.hidden_field :institution_subject_id
            = i.check_box :_destroy, { checked: expert_subject.persisted? }, '0', '1'
            = i.label :_destroy do
              %h4.ui.header
                = institution_subject.subject
                .sub.header= institution_subject.description

            .subject_container
              .ui.radio.checkbox.expert-subject-role.popup-hover
                = i.radio_button :role, "specialist", checked: expert_subject.specialist?
                = i.label :role, value: "specialist" do
                  = t('.specialist')
                  %sup= '?'
              .ui.popup
                %p= t('.specialist_description')
              .ui.radio.checkbox.expert-subject-role.popup-hover
                = i.radio_button :role, "fallback", checked: expert_subject.fallback?
                = i.label :role, value: "fallback" do
                  = t('.fallback')
                  %sup= '?'
              .ui.popup
                %p= t('.fallback_description')

              = i.text_area :description, placeholder: t('.placeholder'), rows: 2

  = f.submit t('confirm'), class: 'ui green button'
