:ruby
  meta title: @landing_subject.meta_title.presence || @landing_subject.title.presence || @landing_subject.landing_theme.meta_title,
    description: @landing_subject.meta_description.presence || @landing_subject.description.presence || @landing_subject.landing_theme.meta_description

- content_for :header, render('solicitations/header', landing: @landing, landing_subject: @landing_subject)

- content_for :form_header do
  - if @landing_subject&.form_description.present?
    %h2.fr-h3.title-icon
      %span.ri-phone-fill.blue
      %span= t('solicitations.creation_form.accompaniments')
    %div= sanitize @landing_subject&.form_description&.html_safe
    .contact-delay.fr-my-5w
      = image_tag('5days-b.png', alt: '')
      %p.fr-m-0= t('solicitations.creation_form.five_days_contact_html')
    = render 'solicitations/steps', current_status: :step_contact

- if @solicitation.persisted?
  - path = update_step_contact_solicitation_path(@solicitation.uuid)
- else
  - path = { controller: "/solicitations", action: "create", landing_slug: @landing.slug, landing_subject_slug: @landing_subject.slug }.merge(query_params)

.fr-grid-row
  .fr-col-12.fr-col-md-6.fr-col-offset-md-3
    = form_with(model: @solicitation, url: path, local: true, html: { honeypot: true }) do |f|
      = f.hidden_field :landing_subject_id
      = f.hidden_field :landing_id
      - @solicitation.contact_step_required_fields.each do |field|
        .fr-mb-2w
          - help = t(".attributes.help.#{field}_html", default: [".attributes.help.#{field}".to_sym, ''])
          = f.label field, class: 'fr-label'
          - if help.present?
            %span.fr-hint-text= help
          = f.text_field field,
            placeholder: t("solicitations.creation_form.placeholder.#{field}"),
            type: Solicitation::FIELD_TYPES[field],
            required: true,
            class: 'fr-input'

        - if @solicitation.errors.present?
          .fr-error-text= @solicitation.errors.full_messages_for(field).to_sentence

      .submit-buttons
        = render 'solicitations/next_button'

- content_for :form_footer do
  .fr-grid-row
    .fr-col-12.fr-col-md-8.fr-col-offset-md-2.fr-pb-3w.legal-notice
      = t('solicitations.creation_form.legal_notice_html',
        mailto_link: mail_to('dpo@placedesentreprises.beta.gouv.fr', 'dpo@placedesentreprises.beta.gouv.fr', target: :_blank),
        informations: link_to(t('about.mentions_d_information.title').downcase, mentions_d_information_url))

- content_for :footer do
  - unless in_iframe?
    .fr-container--fluid.section-grey.fr-py-3w
      = render 'pages/how_it_works'
    - if @landing_subject.logos.present?
      .fr-container--fluid.section-light-grey.fr-py-3w
        .fr-container.fr-py-3w
          %h2.text-dark-grey.text-center.text-normal.fr-text--lead
            = t('logos.title')
          = render 'landings/landings/logos', landing_subject: @landing_subject
    = render 'iframe_footer', landing: @landing
