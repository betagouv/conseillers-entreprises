- content_for :header, render('solicitations/header', landing: @landing, landing_subject: @landing_subject, step_data: @step_data, needs_count: @needs_count)

- content_for :step_data do
  = render 'solicitations/steps', step_data: @step_data

.fr-grid-row
  .fr-col-12.fr-col-md-6.fr-col-offset-md-3.multistep-form.fr-pb-3w
    - if @solicitation.landing_subject.fields_mode_siret?
      .fr-mb-4w
        .fr-callout.fr-callout--yellow-moutarde
          %p.fr-callout__text.fr-text--sm= t("solicitations.creation_form.empty_result_help_html", path: step_company_search_solicitation_path(@solicitation.uuid, anchor: 'section-breadcrumbs'))

    = form_with(model: @solicitation, url: update_step_company_solicitation_path(@solicitation.uuid), local: true, html: { honeypot: true, data: { turbo: false } }) do |f|
      .fr-fieldset
        .fr-fieldset__element
          .fr-input-group
            - if @solicitation.landing_subject.fields_mode_siret?
              = f.label :siret, class: 'fr-label' do
                = t("solicitations.creation_form.siret")
                %span.fr-hint-text= t('attributes.help.no_creation_html')
              = f.text_field :siret, placeholder: t("solicitations.creation_form.placeholder.siret"), class: 'fr-input white-bg', minlength: '9', maxlength: '18'
            - elsif @solicitation.landing_subject.fields_mode_location?
              .insee-code-wrapper{ data: { controller: 'insee-code', 'insee-code-default-value-value': h(@solicitation.location) } }
                = f.label :location, class: 'fr-label' do
                  = t("attributes.location")
                  %span.fr-hint-text= t('attributes.help.location')
                %div{ data: { 'insee-code-target': 'autocomplete', id: 'solicitation_location', name: 'solicitation[location]', 'assistive-hint': t('autocomplete_assistive_hint') } }
                = f.hidden_field :insee_code, data: { 'insee-code-target': 'hidden' }

          - if @solicitation.errors.present?
            %p.fr-error-text{ data: { controller: "pages-error-focus" } }= @solicitation.errors.full_messages.to_sentence

      %ul.fr-btns-group.fr-btns-group--inline.fr-btns-group--right
        %li= render 'previous_button',
                path: step_contact_solicitation_path(@solicitation.uuid,
                anchor: 'section-breadcrumbs'),
                label: t('solicitations.creation_form.step_company.previous')
        %li= render 'next_button'

- content_for :footer do
  = render 'iframe_footer', landing: @solicitation.landing
