- title = t('.title', cooperation_name: @cooperation.name)
- meta title: title

- content_for :menu, render('menu', cooperation_id: @cooperation.id)

.fr-container
  .fr-grid-row
    .fr-col
      %h1.fr-h2= title

.fr-container.reports
  - if @reports_by_quarter.present?
    .fr-table.fr-table--beige-gris-galet.fr-accordions-group
      - @reports_by_quarter.each_with_index do |quarter_and_reports, index|
        - quarter = quarter_and_reports.first
        - report = quarter_and_reports.second.first
        %section.fr-accordion
          %h3.fr-accordion__title
            %button.fr-accordion__btn{ 'aria-controls': "accordion-quarter-#{index}", 'aria-expanded': index == 0 ? 'true' : 'false' }
              #{t('.interval', start_month: I18n.l(quarter.first, format: :month_name), end_month: I18n.l(quarter.last, format: :month_name), year: quarter.last.year).capitalize}
          .fr-collapse{ id: "accordion-quarter-#{index}" }
            .fr-card.fr-enlarge-link.fr-card--download
              .fr-card__body
                .fr-card__content
                  %h3.fr-card__title
                    = link_to download_report_path(report, format: :xlsx), class: 'fr-download__link' do
                      = t(".download.#{report.category}")
                  .fr-card__end
                    %p.fr-card__detail
                      = t('.file_infos', weight: report.file.byte_size / 1000) if report.file.present? # Pour les tests
  - else
    .fr-my-4v
      .fr-alert.fr-alert--info{ role: "alert" }
        %p.fr-alert__title= t('.no_export_available')
